<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Gin-Gonic : Rest API implementation for a `todo` resource - Nafeem Haque</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Gin-Gonic : Rest API implementation for a `todo` resource">
<meta itemprop="description" content="REST API implementation using gin-gonic, a framework of golang"><meta itemprop="datePublished" content="2023-02-17T19:53:59+06:00" />
<meta itemprop="dateModified" content="2023-02-17T19:53:59+06:00" />
<meta itemprop="wordCount" content="1344">
<meta itemprop="keywords" content="golang,code," /><meta property="og:title" content="Gin-Gonic : Rest API implementation for a `todo` resource" />
<meta property="og:description" content="REST API implementation using gin-gonic, a framework of golang" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/post-2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-17T19:53:59+06:00" />
<meta property="article:modified_time" content="2023-02-17T19:53:59+06:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Gin-Gonic : Rest API implementation for a `todo` resource"/>
<meta name="twitter:description" content="REST API implementation using gin-gonic, a framework of golang"/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="/">
				<img src="/profilepic.jpg" alt="Nafeem Haque" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="/">Nafeem Haque</a></h1>
	<div class="site-description"><p>Software Engineer</p><nav class="nav social">
			<ul class="flat"><li><a href="mailto:haquenafeem@gmail.com" title="Mail"><i data-feather="mail"></i></a></li><li><a href="https://github.com/haquenafeem" title="Github"><i data-feather="github"></i></a></li><li><a href="https://www.linkedin.com/in/nafeem-haque/" title="LinkedIn"><i data-feather="linkedin"></i></a></li><li><a href="#" class="scheme-toggle" id="scheme-toggle"></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">17</span>
							<span class="rest">Feb 2023</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Gin-Gonic : Rest API implementation for a `todo` resource</h1>
				</div>
			</div>
					
			<div class="markdown">
				<h1 id="initial-steps">Initial Steps</h1>
<ul>
<li>First create a directory</li>
<li>Go to that directory</li>
<li>Initialize with &lsquo;go mod init todoapp&rsquo;, usually it is a good practice to initialize with something like <code>github.com/{username}/{reponame}</code></li>
<li>Run <code>go get -u github.com/gin-gonic/gin</code> from cli</li>
</ul>
<p>now let&rsquo;s create an empty <code>main.go</code> file, and have the basic code like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#00f">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">func</span> main() {
</span></span><span style="display:flex;"><span>	fmt.Println(<span style="color:#a31515">&#34;hello,world!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>if you run this program by <code>go run main.go</code> you will get the following output:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hello,world!
</span></span></code></pre></div><p>Now let&rsquo;s start writing our application. Before getting into writing all the endpoints, lets create a simple indexhandler which will just return a simple message.</p>
<p>First, we will need to import the gin-gonic library by adding <code>&quot;github.com/gin-gonic/gin&quot;</code> inside the import block:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>import (
</span></span><span style="display:flex;"><span>	&#34;fmt&#34;
</span></span><span style="display:flex;"><span>	&#34;github.com/gin-gonic/gin&#34;
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>At this point we have the proper imports, lets now create a router inside our main function:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>func main() {
</span></span><span style="display:flex;"><span>	fmt.Println(&#34;hello,world!&#34;)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>notice line <code>3</code> , we will get a pointer of gin.Engine, by calling <code>gin.New()</code> and we are going to store it in a variable <code>router</code> for further use.</p>
<p>we can now use the router to create our first index handler.
like this :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>func main() {
</span></span><span style="display:flex;"><span>	fmt.Println(&#34;hello,world!&#34;)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>	router.GET(&#34;/&#34;, func(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.String(200, &#34;msg:%s&#34;, &#34;index handler called&#34;)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>now we have a index handler, lets run the program in <code>3000</code> port. our code so far :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#00f">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">func</span> main() {
</span></span><span style="display:flex;"><span>	fmt.Println(<span style="color:#a31515">&#34;hello,world!&#34;</span>)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.String(200, <span style="color:#a31515">&#34;msg:%s&#34;</span>, <span style="color:#a31515">&#34;index handler called&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.Run(<span style="color:#a31515">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>when you run the following code, this should provide some warnings, lets ignore those for now. at the end of the console you should get something similiar : <code>[GIN-debug] Listening and serving HTTP on :3000</code>, if you get this message, you have successfully created a running server.</p>
<p>now lets test our program, you can use the browser as well, I will use curl. by running <code>curl localhost:3000</code> you will get the response as follows : <code>msg:index handler called</code>, this is a string response, with 200 code, which means the request is ok or successfully completed.</p>
<p>okay so we have our basic server running, now lets get into the real todo resource creating. we will define a structure for todo like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>type Todo struct {
</span></span><span style="display:flex;"><span>	Id          int    `json:&#34;id&#34;`
</span></span><span style="display:flex;"><span>	Title       string `json:&#34;title&#34;`
</span></span><span style="display:flex;"><span>	IsCompleted bool   `json:&#34;is_completed&#34;`
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>notice we have added <code>json</code> tagging to have full control over the json request and response structure and naming.</p>
<p>for this tutorial we are not going to implement an actual database. but we will keep a slice structure to demonstrate.</p>
<p>with our in memory mock datas our program so far is:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#00f">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">type</span> Todo <span style="color:#00f">struct</span> {
</span></span><span style="display:flex;"><span>	Id          <span style="color:#2b91af">int</span>    <span style="color:#a31515">`json:&#34;id&#34;`</span>
</span></span><span style="display:flex;"><span>	Title       <span style="color:#2b91af">string</span> <span style="color:#a31515">`json:&#34;title&#34;`</span>
</span></span><span style="display:flex;"><span>	IsCompleted <span style="color:#2b91af">bool</span>   <span style="color:#a31515">`json:&#34;is_completed&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">var</span> Collection = []Todo{
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          1,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Meet Joey&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          2,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Send Phoebe Flowers&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">func</span> main() {
</span></span><span style="display:flex;"><span>	fmt.Println(<span style="color:#a31515">&#34;hello,world!&#34;</span>)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.String(200, <span style="color:#a31515">&#34;msg:%s&#34;</span>, <span style="color:#a31515">&#34;index handler called&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.Run(<span style="color:#a31515">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>lets create a endpoint to list all the datas, like following:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#00f">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">type</span> Todo <span style="color:#00f">struct</span> {
</span></span><span style="display:flex;"><span>	Id          <span style="color:#2b91af">int</span>    <span style="color:#a31515">`json:&#34;id&#34;`</span>
</span></span><span style="display:flex;"><span>	Title       <span style="color:#2b91af">string</span> <span style="color:#a31515">`json:&#34;title&#34;`</span>
</span></span><span style="display:flex;"><span>	IsCompleted <span style="color:#2b91af">bool</span>   <span style="color:#a31515">`json:&#34;is_completed&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">var</span> Collection = []Todo{
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          1,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Meet Joey&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          2,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Send Phoebe Flowers&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">func</span> main() {
</span></span><span style="display:flex;"><span>	fmt.Println(<span style="color:#a31515">&#34;hello,world!&#34;</span>)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.String(200, <span style="color:#a31515">&#34;msg:%s&#34;</span>, <span style="color:#a31515">&#34;index handler called&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/todo&#34;</span>,<span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.JSON(200,Collection)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.Run(<span style="color:#a31515">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>if we re-run our server and curl at <code>localhost:3000/todo</code>
we should get the following output:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>[{<span style="color:#a31515">&#34;id&#34;</span>:1,<span style="color:#a31515">&#34;title&#34;</span>:<span style="color:#a31515">&#34;Meet Joey&#34;</span>,<span style="color:#a31515">&#34;is_completed&#34;</span>:false},{<span style="color:#a31515">&#34;id&#34;</span>:2,<span style="color:#a31515">&#34;title&#34;</span>:<span style="color:#a31515">&#34;Send Phoebe Flowers&#34;</span>,<span style="color:#a31515">&#34;is_completed&#34;</span>:false}]
</span></span></code></pre></div><p>this is a json response with 200 code.</p>
<p>now let&rsquo;s create a endpoint to post data as following:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#00f">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">type</span> Todo <span style="color:#00f">struct</span> {
</span></span><span style="display:flex;"><span>	Id          <span style="color:#2b91af">int</span>    <span style="color:#a31515">`json:&#34;id&#34;`</span>
</span></span><span style="display:flex;"><span>	Title       <span style="color:#2b91af">string</span> <span style="color:#a31515">`json:&#34;title&#34;`</span>
</span></span><span style="display:flex;"><span>	IsCompleted <span style="color:#2b91af">bool</span>   <span style="color:#a31515">`json:&#34;is_completed&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">var</span> Collection = []Todo{
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          1,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Meet Joey&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          2,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Send Phoebe Flowers&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">func</span> main() {
</span></span><span style="display:flex;"><span>	fmt.Println(<span style="color:#a31515">&#34;hello,world!&#34;</span>)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.String(200, <span style="color:#a31515">&#34;msg:%s&#34;</span>, <span style="color:#a31515">&#34;index handler called&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/todo&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.JSON(200, Collection)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.POST(<span style="color:#a31515">&#34;/todo&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		<span style="color:#00f">var</span> req Todo
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err := ctx.ShouldBindJSON(&amp;req); err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;binding error&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		Collection = append(Collection, req)
</span></span><span style="display:flex;"><span>		ctx.JSON(200, <span style="color:#a31515">&#34;successfully created&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.Run(<span style="color:#a31515">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>lets run and put curl request as follows :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl --location <span style="color:#a31515">&#39;localhost:3000/todo&#39;</span> <span style="color:#a31515">\
</span></span></span><span style="display:flex;"><span><span style="color:#a31515"></span>--header <span style="color:#a31515">&#39;Content-Type: application/json&#39;</span> <span style="color:#a31515">\
</span></span></span><span style="display:flex;"><span><span style="color:#a31515"></span>--data <span style="color:#a31515">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#a31515">    &#34;id&#34;:3,
</span></span></span><span style="display:flex;"><span><span style="color:#a31515">    &#34;title&#34;:&#34;Call Rachel&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#a31515">    &#34;is_completed&#34;:false
</span></span></span><span style="display:flex;"><span><span style="color:#a31515">}&#39;</span>
</span></span></code></pre></div><p>this should provide the response <code>&quot;successfully created&quot;</code>, DYI (do it yourself) : try providing wrong data and see what happens and
call the &ldquo;/todo&rdquo; with &ldquo;GET&rdquo; method to see if your added todo is on the list or not.</p>
<p>we will skip explaining the single get todo endpoint, this is rather easy and you will understand just looking at the code:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#00f">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;strconv&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">type</span> Todo <span style="color:#00f">struct</span> {
</span></span><span style="display:flex;"><span>	Id          <span style="color:#2b91af">int</span>    <span style="color:#a31515">`json:&#34;id&#34;`</span>
</span></span><span style="display:flex;"><span>	Title       <span style="color:#2b91af">string</span> <span style="color:#a31515">`json:&#34;title&#34;`</span>
</span></span><span style="display:flex;"><span>	IsCompleted <span style="color:#2b91af">bool</span>   <span style="color:#a31515">`json:&#34;is_completed&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">var</span> Collection = []Todo{
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          1,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Meet Joey&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          2,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Send Phoebe Flowers&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">func</span> main() {
</span></span><span style="display:flex;"><span>	fmt.Println(<span style="color:#a31515">&#34;hello,world!&#34;</span>)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.String(200, <span style="color:#a31515">&#34;msg:%s&#34;</span>, <span style="color:#a31515">&#34;index handler called&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/todo&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.JSON(200, Collection)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.POST(<span style="color:#a31515">&#34;/todo&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		<span style="color:#00f">var</span> req Todo
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err := ctx.ShouldBindJSON(&amp;req); err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;binding error&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		Collection = append(Collection, req)
</span></span><span style="display:flex;"><span>		ctx.JSON(200, <span style="color:#a31515">&#34;successfully created&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/todo/:id&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		idStr, has := ctx.Params.Get(<span style="color:#a31515">&#34;id&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> !has {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;missing id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		id, err := strconv.Atoi(idStr)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;not valid id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#00f">for</span> _, todo := <span style="color:#00f">range</span> Collection {
</span></span><span style="display:flex;"><span>			<span style="color:#00f">if</span> todo.Id == id {
</span></span><span style="display:flex;"><span>				ctx.JSON(200, todo)
</span></span><span style="display:flex;"><span>				<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		ctx.JSON(500, <span style="color:#a31515">&#34;todo not found&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.Run(<span style="color:#a31515">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>lets now create the update and delete endpoints as the following.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#00f">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;strconv&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a31515">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">type</span> Todo <span style="color:#00f">struct</span> {
</span></span><span style="display:flex;"><span>	Id          <span style="color:#2b91af">int</span>    <span style="color:#a31515">`json:&#34;id&#34;`</span>
</span></span><span style="display:flex;"><span>	Title       <span style="color:#2b91af">string</span> <span style="color:#a31515">`json:&#34;title&#34;`</span>
</span></span><span style="display:flex;"><span>	IsCompleted <span style="color:#2b91af">bool</span>   <span style="color:#a31515">`json:&#34;is_completed&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">var</span> Collection = []Todo{
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          1,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Meet Joey&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		Id:          2,
</span></span><span style="display:flex;"><span>		Title:       <span style="color:#a31515">&#34;Send Phoebe Flowers&#34;</span>,
</span></span><span style="display:flex;"><span>		IsCompleted: <span style="color:#00f">false</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">func</span> main() {
</span></span><span style="display:flex;"><span>	fmt.Println(<span style="color:#a31515">&#34;hello,world!&#34;</span>)
</span></span><span style="display:flex;"><span>	router := gin.New()
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.String(200, <span style="color:#a31515">&#34;msg:%s&#34;</span>, <span style="color:#a31515">&#34;index handler called&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/todo&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		ctx.JSON(200, Collection)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.POST(<span style="color:#a31515">&#34;/todo&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		<span style="color:#00f">var</span> req Todo
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err := ctx.ShouldBindJSON(&amp;req); err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;binding error&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		Collection = append(Collection, req)
</span></span><span style="display:flex;"><span>		ctx.JSON(200, <span style="color:#a31515">&#34;successfully created&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.GET(<span style="color:#a31515">&#34;/todo/:id&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		idStr, has := ctx.Params.Get(<span style="color:#a31515">&#34;id&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> !has {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;missing id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		id, err := strconv.Atoi(idStr)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;not valid id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#00f">for</span> _, todo := <span style="color:#00f">range</span> Collection {
</span></span><span style="display:flex;"><span>			<span style="color:#00f">if</span> todo.Id == id {
</span></span><span style="display:flex;"><span>				ctx.JSON(200, todo)
</span></span><span style="display:flex;"><span>				<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		ctx.JSON(500, <span style="color:#a31515">&#34;todo not found&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.PUT(<span style="color:#a31515">&#34;/todo/:id&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		idStr, has := ctx.Params.Get(<span style="color:#a31515">&#34;id&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> !has {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;missing id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		id, err := strconv.Atoi(idStr)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;not valid id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#00f">var</span> req Todo
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err := ctx.ShouldBindJSON(&amp;req); err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;binding error&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#00f">for</span> i, todo := <span style="color:#00f">range</span> Collection {
</span></span><span style="display:flex;"><span>			<span style="color:#00f">if</span> todo.Id == id {
</span></span><span style="display:flex;"><span>				todo.Title = req.Title
</span></span><span style="display:flex;"><span>				todo.IsCompleted = req.IsCompleted
</span></span><span style="display:flex;"><span>				Collection = append(Collection[:i], todo)
</span></span><span style="display:flex;"><span>				ctx.JSON(200, todo)
</span></span><span style="display:flex;"><span>				<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		ctx.JSON(500, <span style="color:#a31515">&#34;resource not found to update&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.DELETE(<span style="color:#a31515">&#34;/todo/:id&#34;</span>, <span style="color:#00f">func</span>(ctx *gin.Context) {
</span></span><span style="display:flex;"><span>		idStr, has := ctx.Params.Get(<span style="color:#a31515">&#34;id&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> !has {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;missing id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		id, err := strconv.Atoi(idStr)
</span></span><span style="display:flex;"><span>		<span style="color:#00f">if</span> err != <span style="color:#00f">nil</span> {
</span></span><span style="display:flex;"><span>			ctx.JSON(500, <span style="color:#a31515">&#34;not valid id&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#00f">for</span> i, todo := <span style="color:#00f">range</span> Collection {
</span></span><span style="display:flex;"><span>			<span style="color:#00f">if</span> todo.Id == id {
</span></span><span style="display:flex;"><span>				Collection = append(Collection[:i], Collection[i+1:]...)
</span></span><span style="display:flex;"><span>				ctx.JSON(200, <span style="color:#a31515">&#34;successful&#34;</span>)
</span></span><span style="display:flex;"><span>				<span style="color:#00f">return</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		ctx.JSON(500, <span style="color:#a31515">&#34;todo not found&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	router.Run(<span style="color:#a31515">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>DYI: now run the program and test the added endpoints.</p>
<p>With this we have completed our rest application. And we have successfully created the following endpoints.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>GET:     / (index)
</span></span><span style="display:flex;"><span>GET:     /todo (get all todos)
</span></span><span style="display:flex;"><span>POST:    /todo (create a new todo)
</span></span><span style="display:flex;"><span>GET:     /todo/:id (get single todo)
</span></span><span style="display:flex;"><span>PUT:     /todo/:id (update todo)
</span></span><span style="display:flex;"><span>DELETE:  /todo/:id (remove a todo)
</span></span></code></pre></div><p>notes:</p>
<ul>
<li>This is a starter code</li>
<li>There are lot of aspects we could have improved</li>
<li>We will learn the improvements in future posts</li>
</ul>
<p>Thanks a lot for coding and learning with me.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/golang">golang</a></li>
							
							<li><a href="/tags/code">code</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2023  haquenafeem.github.io </div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
